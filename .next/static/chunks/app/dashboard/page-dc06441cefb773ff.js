(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{52634:function(e,s,t){Promise.resolve().then(t.bind(t,71720))},71720:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var r=t(57437),n=t(2265),a=t(84939),l=t(66070),i=t(35974),c=t(62869),d=t(48736),o=t(95805),x=t(70525),m=t(99397),u=t(91723),h=t(49322),f=t(41671),g=t(33327),j=t(42208),p=t(76858),v=t(60044),N=t(47625),y=t(21156),b=t(56940),w=t(97059),Z=t(62994),R=t(8147),S=t(54061),C=t(77031),k=t(83046),q=t(27648);function D(){let{user:e}=(0,a.a)(),[s,t]=(0,n.useState)(null),[D,E]=(0,n.useState)(!0);(0,n.useEffect)(()=>{A()},[e]);let A=async()=>{try{let s=await fetch("/api/dashboard/stats?role=".concat(encodeURIComponent((null==e?void 0:e.role)||""))),r=await s.json();r.success&&t(r.data)}catch(e){console.error("Error fetching dashboard data:",e)}finally{E(!1)}},T=e=>{let s={SUBMITTED:{color:"bg-blue-100 text-blue-800",icon:u.Z},UNDER_REVIEW:{color:"bg-yellow-100 text-yellow-800",icon:h.Z},APPROVED:{color:"bg-green-100 text-green-800",icon:f.Z},REJECTED:{color:"bg-red-100 text-red-800",icon:h.Z}},t=s[e]||s.SUBMITTED,n=t.icon;return(0,r.jsxs)(i.C,{className:"".concat(t.color," flex items-center gap-1"),children:[(0,r.jsx)(n,{className:"h-3 w-3"}),e.replace("_"," ")]})},O=e=>{let s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/36e5);return r<1?"Just now":r<24?"".concat(r," hours ago"):"".concat(Math.floor(r/24)," days ago")};return D?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"},s))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"h-96 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]})]})}):(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[(()=>{let e=new Date().getHours();return e<12?"Good morning":e<17?"Good afternoon":"Good evening"})(),", ",null==e?void 0:e.firstName,"!"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Welcome to your TAMS dashboard. Here's what's happening today."})]}),(0,r.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,r.jsxs)(i.C,{className:"bg-red-100 text-red-800",children:[null==e?void 0:e.role," â€¢ ",null==e?void 0:e.department]})})]}),s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.totalRequests})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"h-6 w-6 text-blue-600"})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-green-500 mr-1"}),(0,r.jsx)("span",{className:"text-green-600",children:"+12% from last month"})]})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.pendingRequests})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"h-6 w-6 text-yellow-600"})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-yellow-500 mr-1"}),(0,r.jsx)("span",{className:"text-yellow-600",children:"Requires attention"})]})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Mentors"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.activeMentors})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 text-green-600"})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 text-green-500 mr-1"}),(0,r.jsx)("span",{className:"text-green-600",children:"All mentors available"})]})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Approved This Month"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.stats.approvedRequests})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(g.Z,{className:"h-6 w-6 text-purple-600"})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-purple-500 mr-1"}),(0,r.jsx)("span",{className:"text-purple-600",children:"Great progress!"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Recent Activities"}),(0,r.jsx)(l.SZ,{children:"Latest updates and actions in the system"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("div",{className:"space-y-4",children:null==s?void 0:s.recentActivities.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-red-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:e.user}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:O(e.timestamp)}),T(e.status)]})]}),(0,r.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(j.Z,{className:"h-4 w-4"})})]},e.id))}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)(q.default,{href:"/requests",children:(0,r.jsxs)(c.z,{variant:"outline",children:["View All Activities",(0,r.jsx)(p.Z,{className:"ml-2 h-4 w-4"})]})})})]})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Quick Actions"}),(0,r.jsx)(l.SZ,{children:"Common tasks and shortcuts"})]}),(0,r.jsx)(l.aY,{className:"space-y-3",children:(()=>{let s=[{title:"View All Requests",description:"Manage internship requests",href:"/requests",icon:d.Z,color:"bg-blue-500"},{title:"Browse Mentors",description:"View mentor profiles",href:"/mentors",icon:o.Z,color:"bg-green-500"},{title:"Generate Reports",description:"Create analytics reports",href:"/reports",icon:x.Z,color:"bg-purple-500"}];return((null==e?void 0:e.role)==="L&D Coordinator"||(null==e?void 0:e.role)==="L&D HoD")&&s.unshift({title:"Create Request",description:"Submit new internship request",href:"/requests",icon:m.Z,color:"bg-red-500"}),s})().map((e,s)=>(0,r.jsx)(q.default,{href:e.href,children:(0,r.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[(0,r.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg flex items-center justify-center mr-3"),children:(0,r.jsx)(e.icon,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"})]})},s))})]}),s&&(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Department Overview"}),(0,r.jsx)(l.SZ,{children:"Requests by department"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:s.departmentBreakdown.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.department})]}),(0,r.jsx)(i.C,{variant:"secondary",children:e.count})]},s))})})]})]})]}),s&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Monthly Trends"}),(0,r.jsx)(l.SZ,{children:"Request submissions over time"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsx)(N.h,{width:"100%",height:300,children:(0,r.jsxs)(y.w,{data:s.monthlyTrends,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"month"}),(0,r.jsx)(Z.B,{}),(0,r.jsx)(R.u,{}),(0,r.jsx)(S.x,{type:"monotone",dataKey:"count",stroke:"#dc2626",strokeWidth:2})]})})})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Department Distribution"}),(0,r.jsx)(l.SZ,{children:"Requests by department"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsx)(N.h,{width:"100%",height:300,children:(0,r.jsxs)(C.v,{data:s.departmentBreakdown,children:[(0,r.jsx)(b.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"department"}),(0,r.jsx)(Z.B,{}),(0,r.jsx)(R.u,{}),(0,r.jsx)(k.$,{dataKey:"count",fill:"#dc2626"})]})})})]})]})]})}},35974:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var r=t(57437);t(2265);var n=t(90535),a=t(94508);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(l({variant:t}),s),...n})}},62869:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var r=t(57437),n=t(2265),a=t(37053),l=t(90535),i=t(94508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,s)=>{let{className:t,variant:n,size:l,asChild:d=!1,...o}=e,x=d?a.g7:"button";return(0,r.jsx)(x,{className:(0,i.cn)(c({variant:n,size:l,className:t})),ref:s,...o})});d.displayName="Button"},66070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var r=t(57437),n=t(2265),a=t(94508);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},94508:function(e,s,t){"use strict";t.d(s,{cn:function(){return a}});var r=t(61994),n=t(53335);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,r.W)(s))}},84939:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return i},a:function(){return c}});var r=t(57437),n=t(2265),a=t(99376);let l=(0,n.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),o=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("user"),s=localStorage.getItem("auth-token");if(e&&s)try{i(JSON.parse(e))}catch(e){console.error("Error parsing user data:",e),x()}d(!1)},[]);let x=()=>{localStorage.removeItem("user"),localStorage.removeItem("auth-token"),i(null),o.push("/login")};return(0,r.jsx)(l.Provider,{value:{user:t,login:(e,s)=>{localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("auth-token",s),i(e)},logout:x,loading:c},children:s})}function c(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[958,916,971,117,744],function(){return e(e.s=52634)}),_N_E=e.O()}]);