"use strict";(()=>{var e={};e.id=2883,e.ids=[2883],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55547:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>N,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>p});var r={};a.r(r),a.d(r,{GET:()=>m});var s=a(73278),n=a(45002),i=a(54877),d=a(71309);let o=new(a(53524)).PrismaClient;async function m(e){try{let e=await o.user.findMany({select:{id:!0,employeeId:!0,firstName:!0,lastName:!0,email:!0,role:{select:{id:!0,name:!0,description:!0}},department:{select:{id:!0,name:!0,code:!0}},isActive:!0,createdAt:!0}}),t=await o.accessRequest.findMany({select:{id:!0,firstName:!0,lastName:!0,email:!0,requestedRoleId:!0,departmentId:!0,status:!0,requestedAt:!0,requestedRole:{select:{name:!0}},department:{select:{name:!0}}}}),a=await o.internshipRequest.findMany().catch(()=>[]),r={database:{totalUsers:e.length,totalAccessRequests:t.length,totalInternshipRequests:a.length},users:e.map(e=>({id:e.id,employeeId:e.employeeId,firstName:e.firstName,lastName:e.lastName,email:e.email,roleName:e.role.name,departmentName:e.department?.name||"No Department",isActive:e.isActive,createdAt:e.createdAt.toISOString()})),accessRequests:t.map(e=>({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,requestedRoleId:e.requestedRoleId,departmentId:e.departmentId,status:e.status,requestedAt:e.requestedAt.toISOString(),roleName:e.requestedRole.name,departmentName:e.department?.name||"Not specified"})),summary:{usersByRole:e.reduce((e,t)=>{let a=t.role.name;return e[a]=(e[a]||0)+1,e},{}),usersByDepartment:e.reduce((e,t)=>{let a=t.department?.name||"No Department";return e[a]=(e[a]||0)+1,e},{}),accessRequestsByStatus:t.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{})}};return d.NextResponse.json(r)}catch(e){return console.error("Error fetching debug info:",e),d.NextResponse.json({error:"Failed to fetch debug information",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/debug/route",pathname:"/api/admin/debug",filename:"route",bundlePath:"app/api/admin/debug/route"},resolvedPagePath:"/workspace/app/api/admin/debug/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:c}=u,g="/api/admin/debug/route";function N(){return(0,i.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:p})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[7787,4833],()=>a(55547));module.exports=r})();