"use strict";(()=>{var e={};e.id=875,e.ids=[875],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},58052:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>A,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>l,dynamic:()=>u});var n=r(49303),s=r(88716),i=r(60670),o=r(87070),m=r(83493);let u="force-dynamic";async function l(e){try{let t=e.nextUrl.searchParams,r=t.get("department"),a=t.get("status"),n={role:{name:"Mentor"},isActive:!0};r&&"all"!==r&&(n.department={name:r});let s=await m._.user.findMany({where:n,include:{role:!0,department:!0},orderBy:{firstName:"asc"}}),i=await Promise.all(s.map(async e=>{let t=await m._.mentorAssignment.count({where:{mentorId:e.id,assignmentStatus:"ACTIVE"}}),r=await m._.mentorAssignment.count({where:{mentorId:e.id}}),a=await m._.mentorAssignment.findMany({where:{mentorId:e.id,assignmentStatus:"ACTIVE"},include:{request:{select:{traineeName:!0,status:!0}}}});return{id:e.id,name:`${e.firstName} ${e.lastName}`,employeeId:e.employeeId,department:e.department?.name||"Unknown",email:e.email,phone:e.phone||"Not provided",designation:"Mentor",experience:"8+ years",specialization:"Technical Mentoring, Project Management",activeTrainees:t,totalTrainees:r,status:e.isActive?"Active":"Inactive",currentAssignments:a.map(e=>({traineeName:e.request.traineeName,status:e.request.status}))}})),u=i;if(a&&"all"!==a){let e={ACTIVE:"Active",AVAILABLE:"Active",UNAVAILABLE:"Inactive"};u=i.filter(t=>t.status===e[a])}return"AVAILABLE"===a&&(u=u.filter(e=>e.activeTrainees<3)),o.NextResponse.json({success:!0,data:u,total:u.length})}catch(e){return console.error("GET mentors error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/mentors/route",pathname:"/api/mentors",filename:"route",bundlePath:"app/api/mentors/route"},resolvedPagePath:"/workspace/app/api/mentors/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:A}=p,g="/api/mentors/route";function v(){return(0,i.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:d})}},83493:(e,t,r)=>{r.d(t,{_:()=>n});let a=require("@prisma/client"),n=globalThis.prisma??new a.PrismaClient({log:["query","error","warn"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(58052));module.exports=a})();